<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tricolor Plazuela</title>
  <link rel="icon" type="image/webp" href="images/logo.webp">
  <link rel="stylesheet" href="style.css">
  <link rel="preload" href="header.html" as="fetch" crossorigin="anonymous">
  <link rel="preload" href="footer.html" as="fetch" crossorigin="anonymous">
</head>
<body>
  <!-- HEADER -->
  <!-- Removed original header block and added header container -->
  <div id="header-container"></div>
  <script>
    // Load header from external file
    fetch('header.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('header-container').innerHTML = html;
      })
      .catch(error => console.error('Error loading header:', error));
  </script>

  <!-- MAIN CONTENT -->
  <main>
    <section class="club-info">
      <h1>CD TRICOLOR PLAZUELA</h1>
      <p>
        CLUB DEPORTIVO FUNDADO 16 MARZO 1956, DE LA LOCALIDAD DE LO MIRANDA, DOÑIHUE
      </p>
    </section>

    <section class="pictures">
      <img src="images/primera.webp" alt="Team Picture 1">
      <img src="images/segunda.webp" alt="Team Picture 2">
      <img src="images/senior.webp" alt="Team Picture senior">
      <img src="images/infantiles.webp" alt="Team Picture kids">
      <img src="images/tercera.webp" alt="Team Picture 3">
    </section>

    <!-- Modal -->
    <div class="modal" id="modal">
    <span class="close" id="modal-close">&times;</span>
    <img id="modal-img" src="" alt="">
    </div>

    <section class="anuncio">
      <h2>Anuncio</h2>
      <iframe src="26_10_2025_A_temp.html"></iframe>
    </section>

    <section class="results">
      <h2>Últimos resultados y Tablas de Posiciones</h2>
      <!-- iframe to load results page -->
      <iframe src="results_webpage.html"></iframe>
    </section>
  </main>

  <div id="footer-container"></div>
  <script>
    // Load header from external file
    fetch('footer.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
      })
      .catch(error => console.error('Error loading footer:', error));
  </script>
  
  <script>
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modal-img');
  const modalClose = document.getElementById('modal-close');

  document.querySelectorAll('.pictures img').forEach(img => {
    img.addEventListener('click', () => {
      modal.style.display = 'flex';
      modalImg.src = img.src;
    });
  });

  modalClose.addEventListener('click', () => modal.style.display = 'none');

  // Close if clicking outside the image
  modal.addEventListener('click', e => {
    if(e.target === modal) modal.style.display = 'none';
  });
</script>

  <!-- iframe auto-resize script -->
  <script>
    (function() {
      const iframe = document.querySelector('.results iframe');
      if (!iframe) return;

      // Try to resize when iframe loads
      function resizeFromIframe() {
        try {
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          if (!doc) return;
          const body = doc.body;
          const html = doc.documentElement;
          const height = Math.max(
            body.scrollHeight, body.offsetHeight,
            html.clientHeight, html.scrollHeight, html.offsetHeight
          );
          iframe.style.height = height + 'px';
        } catch (e) {
          // If cross-origin, we can't access; fallback to postMessage or fixed min-height
          console.warn('Could not access iframe content to auto-resize:', e);
        }
      }

      // When the iframe loads, attempt to resize
      iframe.addEventListener('load', () => {
        resizeFromIframe();

        // Observe mutations inside iframe to adjust height if content changes (same-origin only)
        try {
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          const observer = new MutationObserver(() => resizeFromIframe());
          observer.observe(doc.body, { childList: true, subtree: true, attributes: true });
        } catch (e) {
          // ignore cross-origin errors
        }
      });

      // Also listen for postMessage from iframe pages that can compute own height and send it
      window.addEventListener('message', event => {
        if (!event.data || typeof event.data !== 'object') return;
        if (event.data.type === 'setHeight' && event.source === iframe.contentWindow) {
          iframe.style.height = (event.data.height || 0) + 'px';
        }
      });
    })();
  </script>

</body>
</html>
